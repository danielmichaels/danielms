+++
title = "FluxCD soldiers 5"
categories = ["zet"]
tags = ["zet"]
slug = "fluxcd-soldiers-5"
date = "2026-02-12 00:00:00 +0000 UTC"
draft = "false"
ShowToc = "true"
mermaid = "true"
+++

# FluxCD soldiers 5

## 1. Force Reconcile (most common)

```bash
# Reconcile a kustomization and pull latest git source
flux reconcile kustomization <name> --with-source

# Reconcile just the git source
flux reconcile source git flux-system

# Reconcile a specific HelmRelease
flux reconcile helmrelease <name> -n <namespace>

# Reconcile a HelmRepository (force re-fetch chart index)
flux reconcile source helm <name> -n <namespace>
```

**When:** You pushed a commit and don't want to wait for the poll interval.
`--with-source` on a kustomization reconciles its referenced GitRepository first.

## 2. Suspend / Resume (reset failure state)

```bash
flux suspend helmrelease <name> -n <namespace>
flux resume helmrelease <name> -n <namespace>
```

**When:** A HelmRelease has exhausted its retry budget (e.g. 10 failures) and is stuck.
Even after pushing a fix, Flux won't retry because the failure counter is maxed out.
Suspend/resume resets the counter and forces a fresh reconciliation with current values.

Also works for kustomizations:
```bash
flux suspend kustomization <name>
flux resume kustomization <name>
```

**Why not just reconcile?** `flux reconcile` only triggers a new attempt if retries remain.
Once retries are exhausted, the controller stops trying. Suspend/resume is the reset.

## 3. Check Status

```bash
# Overview of all Flux resources
flux get all

# Specific resource types
flux get kustomizations
flux get helmreleases -A
flux get sources git
flux get sources helm -A

# Detailed events on a HelmRelease
kubectl describe helmrelease <name> -n <namespace>

# Watch for changes
flux get helmreleases -A -w
```

## 4. Debugging

```bash
# Check Flux controller logs
flux logs --kind=HelmRelease --name=<name> --namespace=<namespace>

# Check all Flux controller logs
flux logs --all-namespaces

# Verify local values against chart schema before pushing
helm repo add <repo> <url>
helm repo update
helm template <release> <repo>/<chart> -f values.yaml

# Check what revision Flux sees
flux get sources git
```

Tags:

    #flux #kubernetes
