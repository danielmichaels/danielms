<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name=" robots" content="noindex, nofollow">
<title>Linux Environment Variables &amp; PATH | Daniel Michaels | Software Developer</title>

<meta name="keywords" content="" />
<meta name="description" content="Environment Variables Simply put, environment variables are a collection of key value strings held by the current shell or process. Each process has access to an array of environment variables held in its user-space memory.
The environment variables are available to all applications, and allow these programs or scripts use them within the shell environment. They can allow custom modification to defaults that permeate throughout the user-space rather than be homed within each applications configuration.">
<meta name="author" content="Daniel Michaels">
<link rel="canonical" href="https://danielms.site/blog/linux-environment-variables/" />
<link href="https://danielms.site/assets/css/stylesheet.min.08d6f2005b6ce4ed10207916c0411c66e66f2201e3f7a56e8fb2ccbc4a8b259c.css" integrity="sha256-CNbyAFts5O0QIHkWwEEcZuZvIgHj96Vuj7LMvEqLJZw=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://danielms.site/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://danielms.site/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://danielms.site/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://danielms.site/apple-touch-icon.png">
<link rel="mask-icon" href="https://danielms.site/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.78.1" />




</head>

<body class="single" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://danielms.site/" accesskey="h">Daniel Michaels | Software Developer</a>
            <span class="logo-switches">
                <span class="theme-toggle">
                    <a id="theme-toggle" accesskey="t">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </a>
                </span>
                
            </span>
        </div>
        <ul class="menu" id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://danielms.site/blog/">
                    <span>
                        Blog
                    </span>
                </a>
            </li>
            <li>
                <a href="https://danielms.site/about/">
                    <span>
                        About
                    </span>
                </a>
            </li>
            <li>
                <a href="https://github.com/danielmichaels">
                    <span>
                        Code
                    </span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      Linux Environment Variables &amp; PATH
    </h1>
    <div class="post-meta">

August 11, 2018&nbsp;Â·&nbsp;Daniel Michaels

    </div>
  </header> 

  <div class="post-content">
<h1 id="environment-variables">Environment Variables<a hidden class="anchor" aria-hidden="true" href="#environment-variables">#</a></h1>
<p>Simply put, environment variables are a collection of key value strings held by the current shell or process. Each process has access to an array of environment variables held in its user-space memory.</p>
<p>The environment variables are available to all applications, and allow these programs or scripts use them within the shell environment. They can allow custom modification to defaults that permeate throughout the user-space rather than be homed within each applications configuration.</p>
<p>Each process that is created via <code>fork()</code>, will inherit a copy of its parent&rsquo;s environment. This ensures the communication and transfer of variables from the parent is a once-only one-way transaction. This is important to prevent updated environment variables from one child polluting the global user-space should it go wrong.</p>
<h1 id="path">PATH<a hidden class="anchor" aria-hidden="true" href="#path">#</a></h1>
<p>Each environment will have access to several default or standard variables such as:</p>
<ul>
<li>PATH</li>
<li>HOME</li>
<li>LOGNAME</li>
<li>SHELL</li>
<li>EDITOR</li>
<li>MAIL</li>
</ul>
<p>By typing <code>echo $HOME</code> the users home location will be printed to the terminal. Environmental variables are <strong>case sensitive</strong>, and by convention the key is written in capitals.</p>
<p>echoing <code>$PATH</code> on a unix platform will output a <code>:</code> separated list of file paths such as:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">/usr/local/bin:/usr/local/sbin:/usr/bin
</code></pre></div><p>The <code>PATH</code> is set by system and user start-up scripts - the exact process can change between implementations.
Its function is to search in the <code>PATH</code> locations for the name of any program being called for execution.
In linux everything is file, and when a file is set with the execution bit, that file can be called with the <code>exec()</code> method.
What the <code>PATH</code> does is search recursively through each location, from left to right as its printed, looking for that file if its not given with an absolute path.</p>
<h2 id="example">Example<a hidden class="anchor" aria-hidden="true" href="#example">#</a></h2>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ which <span class="nb">echo</span>
/bin/echo
$ ls -l /bin/echo
-rwxr-xr-x <span class="m">1</span> root root 30k Dec <span class="m">29</span> <span class="m">2017</span> /bin/echo
$ <span class="nb">echo</span> <span class="nv">$PATH</span>
/home/userName/bin:/usr/local/bin:/usr/bin:/bin  <span class="c1"># /bin in PATH</span>
</code></pre></div><p>Above we see that calling <code>which echo</code> returns the location of <code>echo</code> (in my distro it returns <code>echo: shell built-in command</code> but <code>/bin/echo</code> will call the file nonetheless).
Now when we call <code>echo</code> which is not an absolute path, the <code>PATH</code> variable is consulted. Moving left to right the system checks for an executable file named <code>echo</code>, which is finds inside <code>/bin</code>. Once found it executes and ceases the search. If we called <code>/bin/echo</code> the <code>PATH</code> would be searched.</p>
<h2 id="example-two">Example Two<a hidden class="anchor" aria-hidden="true" href="#example-two">#</a></h2>
<p>In a real world case, I use Go&rsquo;s <code>/bin</code> location as an exemplar of why you may need to add to the <code>PATH</code> variable.</p>
<p>Dave Cheney has a pretty sweet Go knock off of an awesome package by the same name <code>httpstat</code>. The TL;DR is that it gives you statistic on a site by simply calling <code>httpstat https://reorx.com</code>. Astute readers will see that this requires <code>httpstat</code> to be on the <code>PATH</code> or it will generate an error.</p>
<p>Fixing this was simple as we see below.</p>
<h1 id="creation--deletion">Creation &amp; Deletion<a hidden class="anchor" aria-hidden="true" href="#creation--deletion">#</a></h1>
<p>Environment variables are key value pairs, case sensitive and by convention have the key written in caps.</p>
<h2 id="creation">Creation<a hidden class="anchor" aria-hidden="true" href="#creation">#</a></h2>
<p>Adding to your current shell environments list of variables is simple.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># method 1</span>
$ <span class="nv">VAR</span><span class="o">=</span>foo       <span class="c1"># create key:value</span>
$ <span class="nb">export</span> VAR    <span class="c1"># export is called on VAR</span>
$ <span class="nb">echo</span> <span class="nv">$VAR</span>     <span class="c1"># echo VAR to terminal</span>
foo

<span class="c1"># method 2</span>
$ <span class="nb">export</span> <span class="nv">VAR</span><span class="o">=</span>foo <span class="c1"># combine export and variable assignment</span>
$ <span class="nb">echo</span> <span class="nv">$VAR</span>
foo
</code></pre></div><p>Bourne shells accept the second method, and its probably the most common and convenient method. <code>export</code> is unix command to set the attribute for a variable. See <code>man export</code> for more information.</p>
<h2 id="deletion">Deletion<a hidden class="anchor" aria-hidden="true" href="#deletion">#</a></h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">unset</span> VAR
$ <span class="nb">echo</span> <span class="nv">$VAR</span>
<span class="c1"># will echo empty string</span>
</code></pre></div><p>Continuing with the <code>httpstat</code> example we will append the location of Go&rsquo;s package binaries to our <code>PATH</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>~/go/bin:<span class="nv">$PATH</span> <span class="c1"># now added to PATH</span>
</code></pre></div><p>Once the variable is exported, it will only live within the current shell. If we close it down, that updated <code>PATH</code> is now lost.</p>
<p>To make the variables persistent we add them to our shell&rsquo;s <code>.profile</code> or <code>.bashrc</code> if using bash. In my case, I use Zsh so its added to <code>.zshrc</code>. Calling <code>source .zshrc</code> will reload <code>.zshrc</code> and make the new variables available if not already. And, because each process inherits form the parent, removing it form the file will prevent it being added to the environment list if needed in the future.</p>
<h1 id="security-tidbits">Security tidbits<a hidden class="anchor" aria-hidden="true" href="#security-tidbits">#</a></h1>
<p>Of note linux implements a security measure within the Superusers <code>PATH</code>. The current working directory is normally omitted from the <code>PATH</code> meaning files must be called using <code>./</code> as the prefix or as an absolute path. This prevents malicious users from placing an executable file with the same name as a system-wide executable such as <code>ls</code> being run as root.</p>
<h1 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h1>
<ul>
<li>Environment variables allows the system to access a list of values for use in applications</li>
<li>Users can set and unset variables</li>
<li><code>PATH</code> is important when you need to access an executable without calling its absolute path</li>
</ul>

</div>
  <footer class="post-footer">
  </footer>
</article>
    </main><footer class="footer">
    <span>&copy; 2020 <a href="https://danielms.site/">Daniel Michaels | Software Developer</a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top" accesskey="g">
    <button class="top-link" id="top-link" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6">
            <path d="M12 6H0l6-6z" /></svg>
    </button>
</a>



<script defer src="https://danielms.site/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js" integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                behavior: "smooth"
            });
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

</body>

</html>
