<!DOCTYPE html>
<html lang="en" data-theme=""><head>
    <title> Daniel Michaels | Rsync cheatsheet </title>

    
    <meta charset="utf-8"><meta name="generator" content="Hugo 0.80.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="I build things and drink coffee.">
    
    <link rel="stylesheet"
          href="https://danielms.site/css/style.min.9a6700e4461b50dccdddfc4f81dc65d77e7fca22c35665e398a0c36568db59c7.css"
          integrity="sha256-mmcA5EYbUNzN3fxPgdxl135/yiLDVmXjmKDDZWjbWcc="
          crossorigin="anonymous"
          type="text/css">
    
    <link rel="stylesheet"
        href="https://danielms.site/css/markupHighlight.min.cc84ed683057cc175ddfa738ea6ba2d5c882b95cb64f50bf9be918cb3791887b.css"
        integrity="sha256-zITtaDBXzBdd36c46mui1ciCuVy2T1C/m&#43;kYyzeRiHs="
        crossorigin="anonymous"
        type="text/css">
    
    <link rel="stylesheet" 
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" 
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" 
    crossorigin="anonymous" />

    
    <link rel="shortcut icon" href="https://danielms.site/extra/favicon.icofavicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://danielms.site/extra/favicon.icoapple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://danielms.site/extra/favicon.icofavicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://danielms.site/extra/favicon.icofavicon-16x16.png">

    <link rel="canonical" href="https://danielms.site/blog/rsync-cheatsheet/">

    
    
    
    
    <script type="text/javascript"
            src="https://danielms.site/js/anatole-header.min.d8599ee07b7d3f11bafbac30657ccc591e8d7fd36a9f580cd4c09e24e0e4a971.js"
            integrity="sha256-2Fme4Ht9PxG6&#43;6wwZXzMWR6Nf9Nqn1gM1MCeJODkqXE="
            crossorigin="anonymous"></script>


    
        
        
        <script type="text/javascript"
                src="https://danielms.site/js/anatole-theme-switcher.min.e289e9ebb2a4e7a7f895859c8a2b0da2de1ec73f22cea58d8475aa0597023837.js"
                integrity="sha256-4onp67Kk56f4lYWciisNot4exz8izqWNhHWqBZcCODc="
                crossorigin="anonymous"></script>
    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Rsync cheatsheet"/>
<meta name="twitter:description" content="This is a short primer on the most simple of rsync&rsquo;s capabilities."/>


    
    <meta property="og:title" content="Rsync cheatsheet" />
<meta property="og:description" content="This is a short primer on the most simple of rsync&rsquo;s capabilities." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://danielms.site/blog/rsync-cheatsheet/" />
<meta property="article:published_time" content="2018-01-24T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-01-24T00:00:00+00:00" /><meta property="og:site_name" content="Daniel Michaels ðŸ‡¦ðŸ‡º" />

</head>
<body><div class="sidebar animated fadeInDown ">
    <div class="logo-title">
        <div class="title">
            <img src="https://danielms.site/extra/cover.jpeg" alt="profile picture">
            <h3 title=""><a href="/">Daniel Michaels ðŸ‡¦ðŸ‡º</a></h3>
            <div class="description">
                <p>I build things and drink coffee.</p>
            </div>
        </div>
    </div>
    <ul class="social-links">
        
            <li>
                <a href="https://linkedin.com/in/daniel-michaels" rel="me" aria-label="Linkedin">
                    <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
            <li>
                <a href="https://github.com/danielmichaels/" rel="me" aria-label="GitHub">
                    <i class="fab fa-github fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
            <li>
                <a href="https://www.twitter.com/dansult/" rel="me" aria-label="twitter">
                    <i class="fab fa-twitter fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
            <li>
                <a href="mailto:dan@mudmap.io" rel="me" aria-label="e-mail">
                    <i class="fas fa-envelope fa-2x" aria-hidden="true"></i>
                </a>
            </li>
        
    </ul>
    <div class="footer">
        <div class="by_farbox">&copy; Daniel Michaels  2018-2021 </div>
    </div>
</div>
<div class="main">
    <div class="page-top  animated fadeInDown ">
    <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
    </a>
    <ul class="nav" id="navMenu">
        
        
            
            <li><a 
                   href="/"
                        
                   title="">Home</a></li>
        
            
            <li><a 
                   href="/blog/"
                        
                   title="">Blog</a></li>
        
            
            <li><a 
                   href="/retrospectives/"
                        
                   title="">Retrospectives</a></li>
        
            
            <li><a 
                   href="/projects/"
                        
                   title="">Projects</a></li>
        
            
            <li><a 
                   href="/about/"
                        
                   title="">About</a></li>
        
        
        
            <li class="theme-switch-item">
                <a class="theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </li>
        
    </ul>
</div>

    <div class="autopagerize_page_element">
        <div class="content">
    <div class="post  animated fadeInDown ">
        <div class="post-content">
            
            <div class="post-title">
                <h3>Rsync cheatsheet</h3>
                
            </div>

            <p>This is a short primer on the most simple of rsync&rsquo;s capabilities.</p>
<p>Rsync is a fast and extraordinarily versatile file copying tool. It uses
a delta transfer algorithm, which reduces the amount of data sent over
the network by sending only the differences between the source and
destination files. It can contact remote systems via SSH or through a
rsync daemon over TCP.</p>
<h3 id="basic-syntax">Basic Syntax</h3>
<p><code>-r</code>: The &lsquo;r&rsquo; flag denotes that the operation is recursive.
It will copy across all files and folders inside the source directory.
However, if the source destination does not have a trailing slash it
will copy the folder, rather than the files inside the folder.</p>
<p><code>-a</code> Archive mode is superior to recursive mode as it will
sustain symbolic links, special and device files, modification times,
group, owner and permissions.</p>
<p><code>--dry-run</code> or <code>-n</code> As a sanity check it is
worth checking that your command is going to do what you <em>think</em> it is
going to do. The dry run will not execute the command. It can (read:
should) be coupled with the next command.</p>
<p><code>-v</code>: Verbose will print out the what actions were
undertaken by the command. If <code>-n</code> is not coupled with a
verbose flag it will print nothing to the screen.</p>
<p><code>--delete</code>: Will remove extra items in the destination
folder that do not exist in the source directory. <strong>Caution:</strong> This can
lead to complete deletion of the destination folder if incorrectly
implemented.</p>
<p><code>-z</code>: When transferring across the network rsync provides a
compression option to save on bandwidth.</p>
<p><code>-P</code>: Outputs a progress bar to the terminal.</p>
<p><code>-H</code>: Preserves hard links - very useful for back ups and snap shots as files that don&rsquo;t change are often hard linked to the original file.</p>
<p><code>--stats</code>: will output a summary of what was sent. Use <code>--stats -h</code> to get a human readable output as seen below.</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># rsync with --stats -h</span>
sending incremental file list

Number of files: 2,265 <span class="o">(</span>reg: 2,264, dir: 1<span class="o">)</span>
Number of created files: <span class="m">0</span>
Number of deleted files: <span class="m">0</span>
Number of regular files transferred: <span class="m">0</span>
Total file size: 100.20M bytes
Total transferred file size: <span class="m">0</span> bytes
Literal data: <span class="m">0</span> bytes
Matched data: <span class="m">0</span> bytes
File list size: 65.50K
File list generation time: 0.001 seconds
File list transfer time: 0.000 seconds
Total bytes sent: 108.52K
Total bytes received: <span class="m">17</span>

sent 108.52K bytes  received <span class="m">17</span> bytes  19.73K bytes/sec
total size is 100.20M  speedup is 923.17
</code></pre></div><p><code>--exclude=important_file.txt</code>: Can be used to omit files
or directories from being synced.</p>
<p><code>--exclude=backups/ --include=backups/most_recent</code>: Inside
the exclusion we can explicitly include certain file, folders or
patterns that fall inside the broader exclude.</p>
<p>example:</p>
<pre><code>rsync -azvnP source_dir/ destination_dir/
</code></pre>
<h3 id="syncing-across-remote-systems">Syncing Across Remote Systems</h3>
<p>Syncing can be either a &ldquo;pull&rdquo; or &ldquo;push&rdquo;.</p>
<p><em>In this example we are</em> copying the directory, not just its contents and sending it from the local system to a remote system.</p>
<p>To copy the entire folder and not just the files within, we must <strong>omit</strong> the trailing slash.</p>
<p>The &ldquo;push&rdquo;:</p>
<pre><code>rsync -a ~/local_source_dir username@remote_host:/home/username/destination_dir
</code></pre>
<p>Here we are retrieving data from a remote server and pulling it down to our local system. Again, we are taking the <em>entire</em> directory so there&rsquo;s no trailing slash.</p>
<p>The &ldquo;pull&rdquo;:</p>
<pre><code>rsync -a username@remote_host:/home/username/directory_we_want where_we_want_it_locally
</code></pre>
<h3 id="ssh">SSH</h3>
<p>Syncing between systems is made much easier if key based authentication
is enabled. If not, the user will be prompted with a password.</p>
<p>To use <code>rsync</code> over a <code>ssh</code> connection we need to specify the protocol <code>rsync</code> needs to use.</p>
<p><code>rsync -aznvPH -e &quot;ssh -i ~/ec2_keyfile.pem&quot; user@remote:/home/folder /tmp/local_system/</code></p>
<p>The <code>-e</code> flag above, tells <code>rsync</code> to use a command, or in this case, another protocol to tunnel over.</p>
<p>We wrap the <code>-e</code> flag command in quotations to encapsulate our private key - this is particularly useful when accessing AWS. Any <code>.ssh/config</code> settings are also respected by <code>rsync</code> making commonly accessed systems far easier to use.</p>
</div>
        <div class="post-footer">
            <div class="info">
                <span class="separator"><a class="category" href="/categories/administration/">administration</a></span>

                <span class="separator"><a class="tag" href="/tags/rsync/">rsync</a></span>

            </div>
        </div>

        
    </div>


        </div>
    </div>
</div>

<script type="text/javascript"
        src="https://danielms.site/js/jquery.min.86b1e8f819ee2d9099a783e50b49dff24282545fc40773861f9126b921532e4c.js"
        integrity="sha256-hrHo&#43;BnuLZCZp4PlC0nf8kKCVF/EB3OGH5EmuSFTLkw="
        crossorigin="anonymous"></script>




<script type="text/javascript"
        src="https://danielms.site/js/bundle.min.0f9c74cb78f13d1f15f33daff4037c70354f98acfbb97a6f61708966675c3cae.js"
        integrity="sha256-D5x0y3jxPR8V8z2v9AN8cDVPmKz7uXpvYXCJZmdcPK4="
        crossorigin="anonymous"></script>

<script type="text/javascript"
        src="https://danielms.site/js/medium-zoom.min.92f21c856129f84aeb719459b3e6ac621a3032fd7b180a18c04e1d12083f8aba.js"
        integrity="sha256-kvIchWEp&#43;ErrcZRZs&#43;asYhowMv17GAoYwE4dEgg/iro="
        crossorigin="anonymous"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-149607103-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</body>

</html>
